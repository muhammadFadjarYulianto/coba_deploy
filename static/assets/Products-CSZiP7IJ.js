import{j as e,T as c,B as P,H as u,r,J as ae,K as se,g as T,M as te,L as re}from"./index-CS89oW_i.js";import{g as ne}from"./product-BqJICZbS.js";import{C as B,a as O,b as U,d as M,e as z}from"./card-BhL9r1mA.js";import{b as V}from"./index-rRY_leQa.js";import{B as le}from"./badge-476qyi6F.js";import{S as F,a as D,b as H,c as A,d as v,F as ce}from"./select-E4NDmCmj.js";import{P as ie,a as oe,b as _,c as de,d as me,e as ue}from"./pagination-CKnmYpEc.js";import{d as xe}from"./debounce-rW3cGHmd.js";const he=({category_name:o,contact:d,img_file:x,price:j,title:n,description:h})=>e.jsxs(B,{children:[e.jsx("div",{className:"rounded-md overflow-hidden",children:e.jsx(V.LazyLoadImage,{src:x,alt:n,className:"w-full h-96 object-cover"})}),e.jsxs(O,{className:"space-y-4",children:[e.jsx(le,{variant:"default",className:"bg-emerald-500 text-white max-w-max px-2 py-1 rounded-full",children:o}),e.jsx(c,{variant:"h2",className:"text-emerald-600 font-bold",children:n}),e.jsxs(c,{variant:"large",className:"text-emerald-600 font-semibold",children:["Rp. ",j]})]}),e.jsx(U,{children:e.jsx(M,{children:e.jsx(c,{variant:"p",type:"description",className:"text-justify",children:h.split(".").slice(0,1).join(".")+"."})})}),e.jsx(z,{children:e.jsx("a",{href:d,target:"_blank",rel:"noopener noreferrer",onClick:N=>N.stopPropagation(),className:"w-full",children:e.jsx(P,{variant:"outline",className:"px-4 py-2 w-full shadow-lg",children:"Hubungi"})})})]});function pe(){return e.jsxs(B,{className:"w-full",children:[e.jsx("div",{className:"rounded-md overflow-hidden",children:e.jsx(u,{className:"w-full h-96 object-cover"})}),e.jsxs(O,{className:"space-y-4",children:[e.jsx(u,{className:"h-8 w-48 rounded-md"}),e.jsx(u,{className:"h-6 w-32 rounded-md"})]}),e.jsx(U,{children:e.jsxs(M,{children:[e.jsx(u,{className:"h-4 w-full mb-2 rounded-md"}),e.jsx(u,{className:"h-4 w-5/6 rounded-md"})]})}),e.jsx(z,{children:e.jsx(u,{className:"h-10 w-full rounded-md"})})]})}function ge({count:o}){return e.jsx(e.Fragment,{children:Array.from({length:o}).map((d,x)=>e.jsx(pe,{},x))})}function _e(){const o=r.useRef(null),d=r.useRef(null),x=ae(),j=se(),n=new URLSearchParams(j.search),[h,N]=r.useState([]),[K,Q]=r.useState([]),[w,C]=r.useState(n.get("keyword")||""),[J,S]=r.useState(n.get("keyword")||""),[t,R]=r.useState(n.get("min_price")?[n.get("min_price"),n.get("max_price")]:null),[m,E]=r.useState(n.get("category_name")||""),[y,b]=r.useState(null),[p,g]=r.useState(parseInt(n.get("page"))||1),[i,W]=r.useState({next:null,previous:null,per_page:8,total_data:0}),[X,L]=r.useState(!0);r.useEffect(()=>{async function a(){try{L(!0),b(null),N([]);const s={keyword:w||null,category_name:m||null,min_price:t?t[0]:null,max_price:t?t[1]:null,page:p,limit:i.per_page},l=await ne(s);Q(l.categories),N(l.products),W(l.pagination)}catch(s){s.message.includes("No response received from server")?b("ERR_CONNECTION_REFUSED"):b(s.message)}finally{L(!1)}}a()},[w,m,t,p,i.per_page]),r.useEffect(()=>{o.current&&T.fromTo(o.current.children,{opacity:0,y:20},{opacity:1,y:0,duration:1,stagger:.5}),d.current&&T.fromTo(d.current,{opacity:0,y:20},{opacity:1,y:0,duration:.6})},[h,y]);const f=a=>{const s=new URLSearchParams(j.search);Object.keys(a).forEach(l=>{a[l]?s.set(l,a[l]):s.delete(l)}),x({search:s.toString()})},$=r.useCallback(xe(a=>{const s=a?{keyword:a,category_name:m||null,min_price:t?t[0]:null,max_price:t?t[1]:null,page:1}:{keyword:null,category_name:null,min_price:null,max_price:null,page:1};C(a||""),g(1),f(s)},500),[m,t]),G=a=>{const s=a.target.value;S(s),$(s)},Y=a=>{const s={category_name:a,keyword:w||null,min_price:t?t[0]:null,max_price:t?t[1]:null,page:1};E(a),g(1),f(s)},Z=a=>{const s=a.split(",").map(Number),l={min_price:s[0],max_price:s[1],category_name:m||null,keyword:w||null,page:1};R(s),g(1),f(l)},k=a=>{a>=1&&a<=Math.ceil(i.total_data/i.per_page)&&(g(a),f({...n,page:a.toString()}))};function I(){const a={category_name:null,keyword:null,min_price:null,max_price:null,page:1};E(""),C(""),S(""),R(null),g(1),f(a)}const q=()=>X?e.jsx("div",{className:"col-span-full flex flex-col items-center justify-center w-full p-8",ref:d,children:e.jsx(c,{variant:"h2",className:"text-emerald-600 text-center mb-4",children:"Memuat Produk..."})}):y?y==="ERR_CONNECTION_REFUSED"?e.jsx(ge,{count:4}):e.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center w-full p-8",ref:d,children:[e.jsx(c,{variant:"h2",className:"text-emerald-600 text-center mb-4",children:"Produk Tidak Ditemukan"}),e.jsx(c,{variant:"large",className:"text-slate-500 text-center mb-6",children:"Tidak ada produk yang sesuai dengan filter atau pencarian Anda."}),e.jsx(P,{onClick:I,variant:"primary",children:"Hapus Filter"})]}):h.map(a=>e.jsx("div",{ref:o,children:e.jsx(re,{to:`/produk/${a.id}`,children:e.jsx(he,{img_file:a.img_file,price:a.price,title:a.product_name,description:a.description,contact:a.contact,category_name:a.category_name})})},a.id)),ee=Math.ceil(i.total_data/i.per_page);return e.jsx("div",{children:e.jsxs("div",{className:"w-full mt-[99px] h-auto flex flex-col items-center gap-[33px]",children:[e.jsxs("div",{className:"relative w-10/12 mx-4 md:mx-0",children:[e.jsx(V.LazyLoadImage,{src:"https://images.pexels.com/photos/3737672/pexels-photo-3737672.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:"Home",className:"w-full h-[481px] object-cover rounded-[20px] shadow-lg"}),e.jsx("div",{className:"absolute inset-0 bg-black opacity-40 rounded-[20px]"}),e.jsx("div",{className:"absolute inset-0 z-10 flex flex-col gap-6 items-center justify-center",children:e.jsx(c,{variant:"title",className:"text-white text-4xl md:text-5xl lg:text-6xl font-bold text-center",children:"Produk Ramah Lingkungan"})})]}),e.jsx("div",{className:"w-full mt-[33px] h-auto flex flex-col items-center",children:e.jsxs("div",{className:"text-center px-4",children:[e.jsxs(c,{variant:"h1",children:["Produk ",e.jsx("strong",{className:"text-emerald-600",children:"Inovatif"})]}),e.jsx(c,{variant:"p",className:"mt-7 max-w-6xl",type:"description",children:"Produk inovatif kami dirancang untuk mendukung keberlanjutan dan menciptakan masa depan yang lebih hijau, dengan solusi ramah lingkungan yang membantu mengurangi dampak negatif terhadap bumi. Produk kami terbuat dari bahan-bahan yang ramah lingkungan dan dapat di daur ulang."})]})}),e.jsx("div",{className:"w-full h-auto mt-[33px] flex flex-col items-center",children:e.jsxs("div",{className:"w-11/12 md:w-10/12 flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("div",{className:"flex w-full md:w-full max-w-2xl items-center space-x-2",children:[e.jsxs(F,{value:t?t.join(","):"",onValueChange:Z,children:[e.jsx(D,{className:"w-full md:w-[180px] h-11 bg-emerald-500 text-white",children:e.jsx(H,{placeholder:"Rentang Harga",className:"text-white"})}),e.jsxs(A,{className:"bg-emerald-500 text-white",children:[e.jsx(v,{value:"0,10000",className:"text-white",children:"Di Bawah 10000"}),e.jsx(v,{value:"10000,50000",className:"text-white",children:"10000 - 50000"}),e.jsx(v,{value:"50000,1000000",className:"text-white",children:"Di Atas 50000"})]})]}),e.jsxs(F,{value:m,onValueChange:Y,children:[e.jsx(D,{className:"w-full md:w-[180px] h-11 bg-emerald-500 text-white",children:e.jsx(H,{placeholder:"Kategori",className:"text-white"})}),e.jsx(A,{className:"bg-emerald-500 text-white",children:K.map(a=>e.jsx(v,{value:a,className:"text-white hover:bg-emerald-700",children:a},a))})]}),e.jsx(P,{onClick:I,variant:"icon",className:"bg-emerald-500 hover:bg-emerald-600 text-background",children:e.jsx(ce,{})})]}),e.jsx("div",{className:"flex w-full md:w-full max-w-2xl items-center space-x-2 mt-4 md:mt-0",children:e.jsx(te,{type:"text",placeholder:"Cari produk...",value:J,onChange:G,className:"h-10 text-emerald-600 border-2 border-emerald-500 w-full"})})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-5 w-10/12 mt-[33px] justify-center items-stretch",children:q()}),h.length>0&&e.jsx("div",{className:"w-10/12 mt-8 sm:mt-[33px]",children:e.jsxs(ie,{className:"gap-5 flex flex-wrap justify-center",children:[e.jsx(oe,{className:"order-1 sm:order-none cursor-pointer",onClick:()=>k(p-1),"aria-disabled":!i.previous,children:e.jsx(_,{children:"Previous"})}),e.jsx(de,{className:"order-3 sm:order-none hidden sm:flex cursor-pointer",children:[...Array(ee)].map((a,s)=>e.jsx(me,{className:"sm:mx-1",children:e.jsx(_,{onClick:()=>k(s+1),isActive:p===s+1,children:s+1})},s))}),e.jsx(ue,{className:"order-2 sm:order-none cursor-pointer",onClick:()=>k(p+1),disabled:!i.next,children:e.jsx(_,{children:"Next"})})]})})]})})}export{_e as default};
