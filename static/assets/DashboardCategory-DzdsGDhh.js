import{r,a2 as z,j as a,$ as G,a0 as U,T as l,B as i,a3 as V,a4 as v,a5 as C,a6 as T,a7 as p,a8 as j,a9 as f,aa as N,M as w}from"./index-CS89oW_i.js";import{C as Y,b as Q}from"./card-BhL9r1mA.js";import{T as W,a as X,b as D,c as x,d as Z,e as h}from"./table-DDg6W2BM.js";import{B as aa,a as ea,b,c as K,d as M,e as ta}from"./breadcrumb-C9uIPhjY.js";import{L as S}from"./label-Dc6lHONL.js";import{g as sa,a as ra,u as la,d as ia}from"./categoryManagement-BQRu0LxK.js";import{P as na,a as ca}from"./plus-D3vUtzE_.js";import{T as da}from"./trash-2-Cy-5REkh.js";function fa(){const[B,P]=r.useState([]),[A,k]=r.useState(!0),[O,u]=r.useState(!1),[E,g]=r.useState(!1),[F,d]=r.useState(!1),[n,y]=r.useState(null),{toast:s}=z(),o=async()=>{try{k(!0);const e=await sa();P(e)}catch(e){s({title:"Error",description:e.message,variant:"destructive"})}finally{k(!1)}},H=async e=>{e.preventDefault();const c={category_name:new FormData(e.target).get("categoryName"),status:"Aktif"};try{await ra(c),s({title:"Berhasil",description:"Kategori baru telah ditambahkan"}),u(!1),await o(),e.target.reset()}catch{s({title:"Produk Gagal Ditambahkan",description:"Produk yang anda tambahkan sudah ada.",variant:"destructive"})}},I=async e=>{e.preventDefault();const c={category_name:new FormData(e.target).get("categoryName"),status:n.status};try{await la(n.id,c),s({title:"Berhasil",description:"Kategori telah diperbarui."}),g(!1),await o()}catch(m){s({title:"Terjadi Kesalahan",description:m.message,variant:"destructive"})}},L=async e=>{try{await ia(e),d(!1),s({title:"Berhasil",description:"Kategori telah dihapus"}),await o()}catch(t){s({title:"Terjadi Kesaahan",description:t.message,variant:"destructive"})}};r.useEffect(()=>{o()},[]);const _=e=>{const t=new Date(e),c=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],m=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],J=c[t.getDay()],$=t.getDate(),R=m[t.getMonth()],q=t.getFullYear();return`${J}, ${$} ${R} ${q}`};return a.jsxs(a.Fragment,{children:[a.jsx("header",{className:"flex h-16 shrink-0 items-center gap-2",children:a.jsxs("div",{className:"flex items-center gap-2 px-4",children:[a.jsx(G,{className:"-ml-1"}),a.jsx(U,{orientation:"vertical",className:"mr-2 h-4"}),a.jsx(aa,{children:a.jsxs(ea,{children:[a.jsx(b,{className:"hidden md:block",children:a.jsx(K,{href:"/",className:"text-[16px] font-normal leading-[28px]",children:"Beranda"})}),a.jsx(M,{className:"hidden md:block"}),a.jsx(b,{children:a.jsx(K,{href:"/Dashboard",className:"text-[16px] font-normal leading-[28px]",children:"Dashboard"})}),a.jsx(M,{className:"hidden md:block"}),a.jsx(b,{children:a.jsx(ta,{className:"text-[16px] font-normal leading-[28px]",children:"Kategori"})})]})})]})}),a.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 pt-0",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mr-0 md:mr-6",children:[a.jsxs("div",{children:[a.jsx(l,{variant:"h1",className:"text-4xl lg:text-5xl",children:"Manajemen Kategori"}),a.jsx(l,{variant:"p",className:"text-slate-700 mt-4",children:"Kelola kategori produk untuk memudahkan pengorganisasian dan pencarian produk di toko Anda."})]}),a.jsxs(i,{variant:"primary",className:"text-white shadow-lg",onClick:()=>u(!0),children:[a.jsx(na,{className:"w-6 h-6 mr-2"}),"Tambah Kategori"]})]}),a.jsx("div",{className:"grid gap-4 grid-cols-1",children:a.jsx(Y,{children:a.jsx(Q,{className:"p-0 md:p-6",children:A?a.jsx("div",{className:"text-center py-4",children:"Memuat data..."}):a.jsxs(W,{children:[a.jsx(X,{children:a.jsxs(D,{children:[a.jsx(x,{className:"text-xl text-center",children:"Nama Kategori"}),a.jsx(x,{className:"text-xl text-center",children:"Jumlah Produk"}),a.jsx(x,{className:"text-xl text-center",children:"Tanggal Dibuat"}),a.jsx(x,{className:"text-xl text-right",children:"Aksi"})]})}),a.jsx(Z,{children:B.map(e=>a.jsxs(D,{children:[a.jsx(h,{className:"text-center",children:e.category_name}),a.jsxs(h,{className:"text-center",children:[e.product_count," Produk"]}),a.jsx(h,{className:"text-center",children:_(e.created_at)}),a.jsx(h,{className:"text-right",children:a.jsx(V,{children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsxs(v,{children:[a.jsx(C,{asChild:!0,children:a.jsx(i,{variant:"outline",size:"icon",onClick:()=>{y(e),g(!0)},children:a.jsx(ca,{className:"w-4 h-4"})})}),a.jsx(T,{className:"bg-emerald-600",children:a.jsx(l,{variant:"p",className:"text-background",children:"Edit Kategori"})})]}),a.jsxs(v,{children:[a.jsx(C,{asChild:!0,children:a.jsx(i,{variant:"outline",size:"icon",className:"text-red-500 hover:text-red-600",onClick:()=>{y(e),d(!0)},children:a.jsx(da,{className:"w-4 h-4"})})}),a.jsx(T,{className:"bg-emerald-600",children:a.jsx(l,{variant:"p",className:"text-background",children:"Hapus Kategori"})})]})]})})})]},e.id))})]})})})})]}),a.jsx(p,{open:O,onOpenChange:u,children:a.jsxs(j,{children:[a.jsxs(f,{className:"space-y-4",children:[a.jsx(N,{className:"text-center text-[30px] font-bold leading-[36px]",children:"Tambah Kategori Baru"}),a.jsx(l,{variant:"p",className:"text-left max-w-lg text-slate-500",children:"Tambahkan kategori baru untuk memudahkan pengorganisasian produk. Kategori baru akan muncul di halaman produk."})]}),a.jsxs("form",{onSubmit:H,className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx(S,{htmlFor:"categoryName",className:"text-[18px] font-bold text-emerald-600",children:"Nama Kategori"}),a.jsx(w,{id:"categoryName",name:"categoryName",required:!0,placeholder:"Masukkan nama kategori",className:"h-12 text-slate-900 border border-slate-50 focus:border-slate-100"})]}),a.jsx(i,{type:"submit",className:"w-full",children:"Simpan"})]})]})}),a.jsx(p,{open:E,onOpenChange:g,children:a.jsxs(j,{children:[a.jsxs(f,{className:"space-y-4",children:[a.jsx(N,{className:"text-center text-[30px] font-bold leading-[36px]",children:"Edit Kategori"}),a.jsx(l,{variant:"p",className:"text-left max-w-lg text-slate-500",children:"Ubah nama kategori untuk memperbarui informasi kategori produk. Perubahan akan muncul di halaman produk."})]}),a.jsxs("form",{onSubmit:I,className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx(S,{htmlFor:"categoryName",className:"text-[18px] font-bold text-emerald-600",children:"Nama Kategori"}),a.jsx(w,{id:"categoryName",name:"categoryName",required:!0,defaultValue:(n==null?void 0:n.category_name)||"",placeholder:"Masukkan nama kategori",className:"h-12 text-slate-900 border border-slate-50 focus:border-slate-100"})]}),a.jsx(i,{type:"submit",className:"w-full",children:"Simpan Perubahan"})]})]})}),a.jsx(p,{open:F,onOpenChange:d,children:a.jsxs(j,{children:[a.jsxs(f,{className:"space-y-4",children:[a.jsx(N,{className:"text-left text-[30px] font-bold leading-[36px]",children:"Hapus Kategori"}),a.jsx(l,{variant:"p",className:"text-left max-w-lg text-slate-500",children:"Apakah Anda yakin ingin menghapus kategori ini? Kategori yang dihapus tidak dapat dikembalikan."})]}),a.jsxs("div",{className:"flex justify-end gap-4",children:[a.jsx(i,{variant:"secondary",onClick:()=>d(!1),children:"Batal"}),a.jsx(i,{variant:"destructive",onClick:()=>{L(n.id)},children:"Hapus"})]})]})})]})}export{fa as default};
